{% extends "base.html" %}
{% block title %}Planos de Assinatura{% endblock %}
{% block content %}
<div class="max-w-6xl mx-auto py-8">
    <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">Escolha o N√≠vel de Certifica√ß√£o Ideal</h1>
    <p class="text-center text-gray-600 mb-8">
        Selecione o plano que melhor se adapta √†s necessidades de seguran√ßa e gest√£o do seu condom√≠nio.
    </p>

    <!-- üåü CONTAINER DO WIDGET DE PRE√áOS DO STRIPE üåü -->
    <div class="bg-white p-4 md:p-8 rounded-lg shadow-xl border border-gray-200">

        <!-- 
            L√≥gica Jinja2: Prepara o identificador do cliente (ID do Stripe ou Email) 
            para o widget. Isso evita que o cliente tenha que digitar o email novamente 
            no checkout do Stripe.
        -->
        {% set customer_identifier = '' %}
        {% if c and c.stripe_customer_id %}
            {% set customer_identifier = c.stripe_customer_id %}
        {% elif c and c.email %}
            {% set customer_identifier = c.email %}
        {% endif %}

        <!-- O SEU C√ìDIGO DA TABELA DE PRE√áOS DO STRIPE COME√áA AQUI -->
        
        <!-- Script que carrega a biblioteca do Stripe (DEVE VIR PRIMEIRO) -->
        <script async src="https://js.stripe.com/v3/pricing-table.js"></script>

        <!-- Widget da Tabela de Pre√ßos, usando suas chaves e ID da tabela -->
        <stripe-pricing-table 
            pricing-table-id="prctbl_1ScnPq1IYJ6hPev6WslxdHns" 
            publishable-key="pk_live_51SX26g1IYJ6hPev6i51nCdqnUxsvnvEnRSwcyQw9nHQsAo4puON1HbbwK6jbxRicJTFRLOK1aQqamYuztgWLRkSX007Dti63qm"
            {% if customer_identifier %}
            customer-email="{{ customer_identifier }}"
            {% endif %}
        >
        </stripe-pricing-table>
        
        <!-- O SEU C√ìDIGO DA TABELA DE PRE√áOS DO STRIPE TERMINA AQUI -->

        <p class="text-center text-sm text-gray-500 mt-6">
            Ao clicar em 'Assinar', voc√™ ser√° redirecionado para a p√°gina de checkout segura e certificada pelo Stripe.
        </p>
    </div>
    <!-- üåü FIM DO WIDGET DE PRE√áOS DO STRIPE üåü -->

</div>
{% endblock %}
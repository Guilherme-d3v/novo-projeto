{% extends "base.html" %}

{% block content %}
<div class="w-full max-w-6xl mx-auto px-4 py-8">
    <div class="text-center mb-8">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Adquirir Coins</h2>
        <p class="text-gray-600">Aumente suas chances participando de novas licitações de condomínios.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Pacote 1 -->
        <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 text-center">
            <div class="mb-4">
                <i class="fas fa-coins text-yellow-500 text-4xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Pacote Básico</h3>
            <div class="text-3xl font-bold text-gray-800 my-3">50 <span class="text-base text-gray-500">coins</span></div>
            <p class="text-gray-600 mb-4">Ideal para pequenas empresas que estão começando agora.</p>
            <hr class="my-4">
            <div class="text-2xl font-bold text-gray-800 mb-4">R$ 50,00</div>
            <button onclick="checkout('pacote_1')" class="w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300">
                Comprar Agora
            </button>
        </div>

        <!-- Pacote 2 (Destaque) -->
        <div class="bg-blue-50 p-6 rounded-lg shadow-md relative">
            <span class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-3 py-1 rounded-full">MAIS POPULAR</span>
            <div class="mb-4 text-blue-600">
                <i class="fas fa-star text-4xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Pacote Pro</h3>
            <div class="text-3xl font-bold text-gray-800 my-3">120 <span class="text-base text-gray-500">coins</span></div>
            <p class="text-gray-600 mb-4">Ótimo custo-benefício com <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">20% de bônus</span>.</p>
            <hr class="my-4">
            <div class="text-2xl font-bold text-gray-800 mb-4">R$ 100,00</div>
            <button onclick="checkout('pacote_2')" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300">
                Comprar Agora
            </button>
        </div>

        <!-- Pacote 3 -->
        <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 text-center">
            <div class="mb-4 text-yellow-500">
                <i class="fas fa-gem text-4xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Pacote Enterprise</h3>
            <div class="text-3xl font-bold text-gray-800 my-3">300 <span class="text-base text-gray-500">coins</span></div>
            <p class="text-gray-600 mb-4">Máxima exposição com <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">50% de bônus</span>.</p>
            <hr class="my-4">
            <div class="text-2xl font-bold text-gray-800 mb-4">R$ 200,00</div>
            <button onclick="checkout('pacote_3')" class="w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300">
                Comprar Agora
            </button>
        </div>
    </div>

    <div class="mt-8 text-center p-6 bg-gray-50 rounded-lg shadow-sm">
        <h5 class="text-lg font-bold text-gray-800 mb-3">Pagamento Seguro via Mercado Pago</h5>
        <div class="flex justify-center space-x-4 opacity-70">
            <img src="https://logospng.org/download/mercado-pago/logo-mercado-pago-256.png" class="h-8" alt="Mercado Pago">
            <img src="https://logospng.org/download/pix/logo-pix-256.png" class="h-8" alt="PIX">
        </div>
    </div>
</div>

<script>
function checkout(pacoteId) {
    fetch('/mp/criar-pagamento', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ pacote_id: pacoteId })
    })
    .then(response => response.json())
    .then(data => {
        if (data.init_point) {
            window.location.href = data.init_point;
        } else {
            alert("Erro ao iniciar pagamento: " + (data.error || "Erro desconhecido"));
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert("Erro na conexão com o servidor.");
    });
}
</script>
{% endblock %}

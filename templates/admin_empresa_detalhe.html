{% extends "base.html" %}

{% block title %}Detalhes Empresa{% endblock %}

{% block content %}

<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
<h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Detalhes da Empresa</h2>
<div class="space-y-4">
<div>
<span class="font-semibold text-gray-700">Nome:</span>
<p class="text-gray-900">{{ e.nome }}</p>
</div>
<div>
<span class="font-semibold text-gray-700">CNPJ:</span>
<p class="text-gray-900">{{ e.cnpj }}</p>
</div>
<div>
<span class="font-semibold text-gray-700">E-mail:</span>
<p class="text-gray-900">{{ e.email_comercial }}</p>
</div>
<div>
<span class="font-semibold text-gray-700">Documento:</span>
{% if e.doc_filename %}
<a href="{{ url_for('uploaded_file', filename=e.doc_filename) }}" class="text-blue-600 hover:underline font-medium" target="_blank">
Visualizar Documento
</a>
{% else %}
<p class="text-gray-500">Nenhum documento enviado.</p>
{% endif %}
</div>
<div>
<span class="font-semibold text-gray-700">Status:</span>
<p class="text-gray-900">{{ e.status | upper }}</p>
</div>
<!-- Adicione outros campos de detalhe aqui -->
</div>

<div class="mt-8 flex justify-end space-x-4">
    {% if e.status in ['pendente', 'verificado'] %}
    <form action="{{ url_for('admin_empresa_action', _id=e.id, acao='aprovar') }}" method="post" class="inline-block">
        <button type="submit" class="bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition duration-300">
            Aprovar
        </button>
    </form>
    <form action="{{ url_for('admin_empresa_action', _id=e.id, acao='rejeitar') }}" method="post" class="inline-block">
        <button type="submit" class="bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-red-700 transition duration-300">
            Rejeitar
        </button>
    </form>
    {% endif %}

    {% if e.status == 'aprovado' %}
    <div class="mt-8 border-t pt-6">
        <h3 class="text-2xl font-bold text-gray-800 mb-4">Editar Status</h3>
        <p class="mb-2 text-gray-700">Status Atual: <span class="font-bold">{{ e.status.value | capitalize }}</span></p>
        <form action="{{ url_for('admin_edit_empresa_status', _id=e.id) }}" method="post" class="flex items-end space-x-4">
            <div class="flex-grow">
                <label for="status-edit" class="block font-semibold text-gray-700">Novo Status:</label>
                <select name="status" id="status-edit" required class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                    <option value="ativo" {% if e.status and e.status.name == 'ATIVO' %}selected{% endif %}>Ativo</option>
                    <option value="suspenso" {% if e.status and e.status.name == 'SUSPENSO' %}selected{% endif %}>Suspenso</option>
                    <option value="pendente" {% if e.status and e.status.name == 'PENDENTE' %}selected{% endif %}>Pendente</option>
                </select>
            </div>
            <button type="submit" class="bg-orange-500 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-orange-600 transition duration-300">
                Atualizar Status
            </button>
        </form>
    </div>
    {% endif %}
</div>

</div>
{% endblock %}